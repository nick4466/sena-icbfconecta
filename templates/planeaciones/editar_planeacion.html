{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Editar Planeación</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
<style>
    * { box-sizing: border-box; }
    body {
        margin: 0;
        font-family: 'Roboto', sans-serif;
        background-color: #f5f7fa;
}
    header {
        background-color: rgba(255, 255, 255, 0.85);
        padding: 15px 30px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 2px solid #e5d5f5;
        backdrop-filter: blur(4px);
    }
    header img { height: 60px; }
    nav ul { list-style: none; display: flex; gap: 20px; padding: 0; margin: 0; }
    nav ul li a, nav ul li button {
        text-decoration: none;
        color: #9B59B6;
        font-weight: bold;
        font-size: 16px;
        padding: 8px 12px;
        border-radius: 6px;
        background: none;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    nav ul li a:hover, nav ul li button:hover { background-color: #f3c1e5; }
    nav ul .dropdown { position: relative; }
    nav ul .dropdown-content {
        display: none;
        position: absolute;
        background-color: rgba(255,255,255,0.98);
        min-width: 200px;
        box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
        z-index: 1;
        border-radius: 8px;
        padding: 8px 0;
    }
    nav ul .dropdown:hover .dropdown-content { display: block; }
    nav ul .dropdown-content a { color: #9B59B6; padding: 12px 16px; text-decoration: none; display: block; }
    nav ul .dropdown-content a:hover { background-color: #f3c1e5; }

    .main-title { text-align:center; margin:20px auto; padding:20px; font-size:26px; font-weight:bold; color:#7a3eb1; background-color: rgba(255,255,255,0.7); width:80%; border-radius:10px; }
    .contenedor { width:90%; margin:auto; display:grid; grid-template-columns: repeat(2,1fr); gap:25px; margin-top:20px; }
    .card { background: rgba(255,255,255,0.85); padding:25px; border-radius:15px; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    .card h2 { color:#7a3eb1; margin-bottom:20px; }
    .fila { display:flex; gap:20px; margin-bottom:18px; }
    .col { flex:1; display:flex; flex-direction:column; }
    .col label { font-weight:bold; margin-bottom:6px; color:#5e3370; }
    input, textarea, select { width:100%; padding:10px; border-radius:8px; border:1px solid #b18ad7; background:white; font-size:14px; }
    textarea { min-height:70px; }
    .documentos { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-bottom:10px; }
    .documentos img { width:120px; height:120px; object-fit:cover; border-radius:8px; border:2px solid #d8b4f8; transition:transform 0.3s ease; }
    .documentos img:hover { transform:scale(1.05); }
    .checkbox-eliminar { text-align:center; font-size:12px; color:#5e3370; margin-top:4px; }
    .acciones { text-align:center; margin-top:20px; display:flex; justify-content:center; gap:25px; }
    .btn-guardar { background-color:#9B59B6; color:white; padding:12px 30px; border:none; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; transition:0.3s; }
    .btn-guardar:hover { background-color:#8e44ad; }
    .btn-volver { background-color:#f3c1e5; color:#5e3370; padding:12px 25px; border-radius:8px; text-decoration:none; font-weight:bold; }
    .btn-volver:hover { background-color:#e8a9d6; }
    .alert { width:80%; margin:10px auto; padding:10px; border-radius:8px; text-align:center; font-weight:bold; background:#ffdddd; color:#cc0000; }
</style>
</head>
<body>
{% include 'madre/navbar_madre.html' %}

<div class="main-title">Editar Planeación</div>

<form method="POST" enctype="multipart/form-data">
{% csrf_token %}
<div class="contenedor">

  <!-- Tarjeta Izquierda -->
  <div class="card">
      <h2><i class="fas fa-file-alt"></i> Datos Generales</h2>
      <div class="fila">
        <div class="col"><label>Fecha</label>{{ form.fecha }}</div>
        <div class="col"><label>Nombre de la experiencia</label>{{ form.nombre_experiencia }}</div>
      </div>
      <div class="fila">
        <div class="col"><label>Intencionalidad Pedagógica</label>{{ form.intencionalidad_pedagogica }}</div>
      </div>
      <div class="card" style="margin: 20px 0;">
                <h3 class="titulo-bloque" style="color:#7a3eb1; margin-bottom:10px;">
                    Dimensiones a trabajar
                </h3>
                <!-- Botón para seleccionar todas -->
                <button type="button" id="seleccionar-todas" style="
                    background:#7a3eb1;
                    color:white;
                    border:none;
                    padding:6px 12px;
                    border-radius:6px;
                    margin-bottom:10px;
                    cursor:pointer;
                ">Seleccionar todas</button>
                {{ form.dimensiones }}
            </div>
      <div class="fila">
        <div class="col"><label>Materiales a utilizar</label>{{ form.materiales_utilizar }}</div>
      </div>
  </div>

  <!-- Tarjeta Derecha -->
  <div class="card">
      <h2><i class="fas fa-chalkboard-teacher"></i> Desarrollo de la Experiencia</h2>
      <div class="fila"><div class="col"><label>Ambientación del espacio</label>{{ form.ambiente_educativo }}</div></div>
      <div class="fila"><div class="col"><label>Actividad de Inicio</label>{{ form.experiencia_inicio }}</div></div>
      <div class="fila"><div class="col"><label>Desarrollo</label>{{ form.experiencia_pedagogica }}</div></div>
      <div class="fila"><div class="col"><label>Cierre</label>{{ form.cierre_experiencia }}</div></div>
      <div class="fila"><div class="col"><label>Observaciones</label>{{ form.situaciones_presentadas }}</div></div>
      <div class="fila">
          <div class="col">
              <label>Documentación (Fotos)</label>
              <div class="documentos">
                  {% for doc in documentos %}
                  <div>
                      <img src="{{ doc.imagen.url }}" alt="Evidencia {{ forloop.counter }}">
                      <div class="checkbox-eliminar">
                          <label><input type="checkbox" name="eliminar_documentos" value="{{ doc.id }}"> Eliminar</label>
                      </div>
                  </div>
                  {% endfor %}
              </div>
              <input type="file" name="imagenes" multiple>
          </div>
      </div>
  </div>

</div> <!-- cierre contenedor -->

<div class="acciones">
    <button type="submit" class="btn-guardar">Actualizar Planeación</button>
    <a href="{% url 'planeaciones:lista_planeaciones' %}" class="btn-volver"><i class="fas fa-arrow-left"></i> Volver al listado</a>
</div>

</form>
</body>
<script>
    document.getElementById('seleccionar-todas').addEventListener('click', function() {
        const checkboxes = document.querySelectorAll('input[name="dimensiones"]');
        checkboxes.forEach(cb => cb.checked = true);
    });
</script>
</html>
